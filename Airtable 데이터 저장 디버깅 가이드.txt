================================================================================
Airtable 데이터 저장 디버깅 가이드
================================================================================

콘솔에는 저장 성공 메시지가 보이지만 Airtable에 데이터가 없는 경우의 해결 방법입니다.

================================================================================
1. 현재 상황 분석
================================================================================

콘솔 메시지 확인:
✅ "✅ 역량 진단 결과 저장 완료!" - 역량 진단 결과 저장 성공
❓ 설문 결과 저장 메시지가 보이지 않음

가능한 원인:
1. 설문 결과 저장이 실행되지 않았을 수 있어요
2. 설문 결과 저장이 실패했지만 에러가 숨겨졌을 수 있어요
3. 필드 이름이 맞지 않아서 저장은 되었지만 보이지 않을 수 있어요
4. 다른 테이블에 저장되었을 수 있어요

================================================================================
2. 단계별 확인 방법
================================================================================

2.1. 콘솔에서 설문 결과 저장 메시지 확인

콘솔에서 다음 메시지를 찾아보세요:
- "💾 설문 결과를 Airtable에 저장합니다..."
- "✅ 설문 결과 저장 완료!"
- "⚠️ Airtable 저장 실패 (계속 진행):"

만약 이 메시지들이 보이지 않는다면:
→ 설문 결과 저장이 실행되지 않았을 수 있어요

2.2. Network 탭에서 API 요청 확인

1. 개발자 도구를 엽니다 (F12)
2. "Network" (네트워크) 탭을 클릭합니다
3. 설문을 다시 완료합니다
4. "airtable.com"으로 시작하는 요청을 찾아보세요
5. 각 요청을 클릭해서 확인합니다:
   - "Headers" 탭: 요청 URL과 헤더 확인
   - "Payload" 탭: 전송된 데이터 확인
   - "Response" 탭: 서버 응답 확인

성공한 요청:
- Status: 200 OK
- Response에 records 배열이 있음

실패한 요청:
- Status: 403, 404, 422 등
- Response에 에러 메시지가 있음

2.3. Airtable에서 모든 테이블 확인

1. Airtable에서 "AX 역량모델" Base를 엽니다
2. 왼쪽 사이드바에서 모든 테이블을 확인합니다
3. "사용자_평가결과" 테이블 외에 다른 테이블에도 데이터가 있는지 확인합니다

================================================================================
3. 필드 이름 확인
================================================================================

3.1. Airtable 필드 이름 정확히 확인

Airtable에서 "사용자_평가결과" 테이블을 열고
각 필드 이름을 정확히 확인하세요:

필수 필드:
- 사번
- 설문답변
- 생성형AI점수
- 실무데이터점수
- 전략점수
- 전문가점수
- 최종역할
- 역할설명
- 진단일시

역량 진단 관련 필드:
- 희망역할
- 역량점수
- 격차분석
- 추천교육과정
- 역량진단일시

3.2. 필드 이름이 다른 경우

만약 필드 이름이 다르다면:
1. Airtable에서 필드 이름을 코드와 일치하도록 변경하거나
2. 코드의 필드 이름을 Airtable과 일치하도록 변경해야 해요

================================================================================
4. 설문 결과 저장 확인
================================================================================

4.1. 설문 완료 시 콘솔 확인

설문을 완료할 때 콘솔에서 다음을 확인하세요:

1. "✅ 설문이 완료되었습니다!" 메시지
2. "💾 설문 결과를 Airtable에 저장합니다..." 메시지
3. "✅ 설문 결과 저장 완료!" 또는 에러 메시지

4.2. 설문 결과 저장이 실행되지 않는 경우

만약 "💾 설문 결과를 Airtable에 저장합니다..." 메시지가 보이지 않는다면:
→ completeSurvey 함수가 제대로 실행되지 않았을 수 있어요

확인 사항:
- 모든 질문에 답변했는지 확인
- "완료" 버튼을 클릭했는지 확인
- 콘솔에 다른 에러가 있는지 확인

================================================================================
5. 해결 방법
================================================================================

5.1. 방법 1: 설문부터 다시 완료

1. 브라우저를 완전히 새로고침합니다 (Ctrl + Shift + R)
2. localStorage를 초기화합니다:
   - 개발자 도구 → Application 탭 → Local Storage → 모두 삭제
3. 설문을 처음부터 완료합니다
4. 콘솔에서 모든 메시지를 확인합니다

5.2. 방법 2: Network 탭에서 확인

1. 개발자 도구 → Network 탭 열기
2. "Preserve log" 체크 (페이지 이동해도 로그 유지)
3. 설문을 완료합니다
4. "airtable.com" 요청을 찾아서 확인합니다
5. 요청이 성공했는지, 실패했는지 확인합니다

5.3. 방법 3: 필드 이름 수정

Airtable 필드 이름이 코드와 다르다면:
1. Airtable에서 필드 이름을 코드와 일치하도록 변경하거나
2. 코드를 수정해서 Airtable 필드 이름과 일치시키세요

================================================================================
6. 디버깅 코드 추가 (선택사항)
================================================================================

더 자세한 로그를 보려면 코드에 디버깅 메시지를 추가할 수 있어요.

하지만 먼저 위의 방법들을 시도해보세요.

================================================================================
7. 체크리스트
================================================================================

□ 1. 콘솔에서 "💾 설문 결과를 Airtable에 저장합니다..." 메시지 확인
□ 2. Network 탭에서 airtable.com 요청 확인
□ 3. 요청이 성공(200)했는지 확인
□ 4. Airtable에서 필드 이름이 정확한지 확인
□ 5. Airtable에서 모든 테이블 확인
□ 6. localStorage 초기화 후 다시 시도
□ 7. 브라우저 완전 새로고침

================================================================================
문서 끝
================================================================================

