<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- 
        관리자 대시보드 페이지의 기본 정보를 설정하는 곳이에요.
        이 페이지는 HR이나 혁신 리더들이 AX 진단 결과를 모니터링할 수 있는 관리자 전용 페이지예요.
    -->
    
    <!-- 웹페이지의 문자 인코딩을 설정해요. 한국어를 제대로 표시하기 위해 필요해요 -->
    <meta charset="UTF-8">
    
    <!-- 웹페이지가 다양한 기기(스마트폰, 태블릿, 컴퓨터)에서 잘 보이도록 설정해요 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 웹페이지의 제목이에요. 브라우저 탭에 표시돼요 -->
    <title>AX 역량 진단 관리자 대시보드</title>
    
    <!-- Tailwind CSS를 사용하기 위해 CDN(인터넷에서 가져오는 라이브러리)을 연결해요 -->
    <!-- Tailwind CSS는 웹페이지를 예쁘게 꾸밀 수 있는 도구예요 -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js를 사용하기 위해 CDN을 연결해요 -->
    <!-- Chart.js는 데이터를 그래프나 차트로 시각화할 수 있는 도구예요 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- 우리가 만든 CSS 파일을 연결해요 -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-50">
    <!-- 
        이 부분은 관리자 대시보드의 실제 내용이 들어가는 곳이에요.
        사용자가 화면에서 보게 되는 모든 내용이 여기에 들어가요!
    -->
    
    <!-- 
        인증 화면: 관리자만 접근할 수 있도록 비밀번호를 입력받는 화면이에요
        - hidden: 처음에는 숨겨져 있어요 (인증이 완료되면 보여줘요)
        - opacity-0: 투명하게 만들어요 (애니메이션 효과를 위해)
    -->
    <div id="auth-screen" class="flex flex-col min-h-screen items-center justify-center p-4 sm:p-6 md:p-8">
        <!-- 
            인증 카드: 비밀번호를 입력받는 카드 형태의 영역이에요
            - bg-white: 배경색을 흰색으로 해요
            - rounded-lg: 모서리를 둥글게 만들어요
            - shadow-lg: 그림자 효과를 줘요
            - p-6 sm:p-8: 화면 크기에 따라 안쪽 여백을 다르게 설정해요
            - max-w-md: 최대 너비를 제한해서 너무 넓어지지 않게 해요
            - w-full: 가로 전체를 사용해요
        -->
        <div class="bg-white rounded-lg shadow-lg p-6 sm:p-8 max-w-md w-full">
            <!-- 
                인증 카드 제목
                - text-center: 텍스트를 가운데 정렬해요
                - mb-6: 아래쪽에 여백을 6만큼 줘요
            -->
            <div class="text-center mb-6">
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">
                    관리자 로그인
                </h1>
                <p class="text-sm sm:text-base text-gray-600">
                    AX 역량 진단 관리자 대시보드에 접근하려면 비밀번호를 입력해주세요.
                </p>
            </div>
            
            <!-- 
                비밀번호 입력 폼
                - space-y-4: 자식 요소들 사이에 세로 여백을 4만큼 줘요
            -->
            <form id="auth-form" class="space-y-4">
                <!-- 
                    비밀번호 입력 필드
                    - label: 입력 필드의 설명이에요 (접근성을 위해 필요해요)
                    - input: 실제로 비밀번호를 입력하는 곳이에요
                -->
                <div>
                    <label for="admin-password" class="block text-sm font-medium text-gray-700 mb-2">
                        비밀번호
                    </label>
                    <input
                        type="password"
                        id="admin-password"
                        name="password"
                        required
                        class="
                            w-full
                            px-4
                            py-2
                            border
                            border-gray-300
                            rounded-lg
                            focus:outline-none
                            focus:ring-2
                            focus:ring-blue-500
                            focus:border-transparent
                            text-sm
                            sm:text-base
                        "
                        placeholder="관리자 비밀번호를 입력하세요"
                        aria-label="관리자 비밀번호 입력"
                    >
                </div>
                
                <!-- 
                    에러 메시지 영역
                    - hidden: 처음에는 숨겨져 있어요 (에러가 발생하면 보여줘요)
                    - text-red-600: 텍스트 색상을 빨간색으로 해요
                -->
                <div id="auth-error" class="hidden text-sm text-red-600 text-center">
                    비밀번호가 올바르지 않습니다. 다시 시도해주세요.
                </div>
                
                <!-- 
                    로그인 버튼
                    - type="submit": 폼을 제출하는 버튼이에요
                    - w-full: 가로 전체를 사용해요
                    - bg-blue-600: 배경색을 파란색으로 해요
                    - hover:bg-blue-700: 마우스를 올렸을 때 색상이 조금 더 진해져요
                -->
                <button
                    type="submit"
                    class="
                        w-full
                        bg-blue-600
                        hover:bg-blue-700
                        text-white
                        font-bold
                        py-3
                        px-4
                        rounded-lg
                        shadow-md
                        transition
                        duration-200
                        focus:outline-none
                        focus:ring-2
                        focus:ring-blue-500
                        focus:ring-offset-2
                    "
                >
                    로그인
                </button>
            </form>
        </div>
    </div>
    
    <!-- 
        대시보드 화면: 인증이 완료되면 보여지는 실제 대시보드 화면이에요
        - hidden: 처음에는 숨겨져 있어요 (인증이 완료되면 보여줘요)
        - opacity-0: 투명하게 만들어요 (애니메이션 효과를 위해)
    -->
    <div id="dashboard-screen" class="hidden opacity-0 min-h-screen p-4 sm:p-6 md:p-8 transition-opacity duration-500">
        <!-- 
            대시보드 헤더: 상단에 있는 제목과 새로고침 버튼이 있는 영역이에요
            - flex: 요소들을 가로로 배치해요
            - justify-between: 양쪽 끝에 배치해요
            - items-center: 세로 가운데 정렬해요
            - mb-6: 아래쪽에 여백을 6만큼 줘요
        -->
        <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-1">
                    AX 역량 진단 관리자 대시보드
                </h1>
                <p class="text-sm sm:text-base text-gray-600">
                    진단 결과를 모니터링하고 통계를 확인할 수 있어요.
                </p>
            </div>
            
            <!-- 
                새로고침 버튼
                - bg-gray-500: 배경색을 회색으로 해요
                - hover:bg-gray-600: 마우스를 올렸을 때 색상이 조금 더 진해져요
            -->
            <button
                id="refresh-btn"
                type="button"
                class="
                    bg-gray-500
                    hover:bg-gray-600
                    text-white
                    font-medium
                    py-2
                    px-4
                    rounded-lg
                    shadow-md
                    transition
                    duration-200
                    focus:outline-none
                    focus:ring-2
                    focus:ring-gray-500
                    focus:ring-offset-2
                    flex
                    items-center
                    gap-2
                "
                aria-label="데이터 새로고침"
            >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                새로고침
            </button>
        </header>
        
        <!-- 
            통계 카드 영역: 총 참여자, 평균 점수 등의 통계를 보여주는 카드들이 있는 영역이에요
            - grid: 격자 형태로 배치해요
            - grid-cols-1: 모바일에서는 1열로 배치해요
            - sm:grid-cols-2: 작은 화면에서는 2열로 배치해요
            - lg:grid-cols-4: 큰 화면에서는 4열로 배치해요
            - gap-4: 카드들 사이에 여백을 4만큼 줘요
            - mb-6: 아래쪽에 여백을 6만큼 줘요
        -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <!-- 
                총 참여 인원 수 카드
                - bg-white: 배경색을 흰색으로 해요
                - rounded-lg: 모서리를 둥글게 만들어요
                - shadow-md: 그림자 효과를 줘요
                - p-6: 안쪽 여백을 6만큼 줘요
            -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">
                            총 참여 인원
                        </p>
                        <p id="stat-total-participants" class="text-2xl font-bold text-gray-800">
                            -
                        </p>
                    </div>
                    <div class="bg-blue-100 rounded-full p-3">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <!-- 평균 점수 카드 -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">
                            평균 점수
                        </p>
                        <p id="stat-average-score" class="text-2xl font-bold text-gray-800">
                            -
                        </p>
                    </div>
                    <div class="bg-green-100 rounded-full p-3">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <!-- 오늘 완료 인원 수 카드 -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">
                            오늘 완료 인원
                        </p>
                        <p id="stat-today-completed" class="text-2xl font-bold text-gray-800">
                            -
                        </p>
                    </div>
                    <div class="bg-yellow-100 rounded-full p-3">
                        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <!-- 역할별 분포 카드 -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">
                            역할 종류
                        </p>
                        <p id="stat-role-count" class="text-2xl font-bold text-gray-800">
                            -
                        </p>
                    </div>
                    <div class="bg-purple-100 rounded-full p-3">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 
            차트 영역: 역할 분포 파이 차트와 역량별 평균 점수 막대 그래프가 있는 영역이에요
            - grid: 격자 형태로 배치해요
            - grid-cols-1: 모바일에서는 1열로 배치해요
            - lg:grid-cols-2: 큰 화면에서는 2열로 배치해요
            - gap-6: 카드들 사이에 여백을 6만큼 줘요
            - mb-6: 아래쪽에 여백을 6만큼 줘요
        -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- 
                역할 분포 파이 차트 카드
                - bg-white: 배경색을 흰색으로 해요
                - rounded-lg: 모서리를 둥글게 만들어요
                - shadow-md: 그림자 효과를 줘요
                - p-6: 안쪽 여백을 6만큼 줘요
            -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-lg font-bold text-gray-800 mb-4">
                    역할 분포
                </h2>
                <div class="h-64 flex items-center justify-center">
                    <canvas id="role-distribution-chart"></canvas>
                </div>
            </div>
            
            <!-- 역량별 평균 점수 막대 그래프 카드 -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-lg font-bold text-gray-800 mb-4">
                    역량별 평균 점수
                </h2>
                <div class="h-64 flex items-center justify-center">
                    <canvas id="competency-score-chart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- 
            사용자 목록 테이블 영역: 진단 결과를 테이블 형태로 보여주는 영역이에요
            - bg-white: 배경색을 흰색으로 해요
            - rounded-lg: 모서리를 둥글게 만들어요
            - shadow-md: 그림자 효과를 줘요
            - p-6: 안쪽 여백을 6만큼 줘요
        -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <!-- 
                테이블 헤더: 검색, 필터, CSV 다운로드 버튼이 있는 영역이에요
                - flex: 요소들을 가로로 배치해요
                - flex-col: 모바일에서는 세로로 배치해요
                - sm:flex-row: 작은 화면 이상에서는 가로로 배치해요
                - justify-between: 양쪽 끝에 배치해요
                - items-center: 세로 가운데 정렬해요
                - mb-4: 아래쪽에 여백을 4만큼 줘요
                - gap-4: 요소들 사이에 여백을 4만큼 줘요
            -->
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4">
                <h2 class="text-lg font-bold text-gray-800">
                    사용자 목록
                </h2>
                
                <!-- 
                    CSV 다운로드 버튼
                    - bg-green-500: 배경색을 초록색으로 해요
                    - hover:bg-green-600: 마우스를 올렸을 때 색상이 조금 더 진해져요
                -->
                <button
                    id="csv-download-btn"
                    type="button"
                    class="
                        bg-green-500
                        hover:bg-green-600
                        text-white
                        font-medium
                        py-2
                        px-4
                        rounded-lg
                        shadow-md
                        transition
                        duration-200
                        focus:outline-none
                        focus:ring-2
                        focus:ring-green-500
                        focus:ring-offset-2
                        flex
                        items-center
                        gap-2
                    "
                    aria-label="CSV 다운로드"
                >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    CSV 다운로드
                </button>
            </div>
            
            <!-- 
                검색 및 필터 영역
                - grid: 격자 형태로 배치해요
                - grid-cols-1: 모바일에서는 1열로 배치해요
                - sm:grid-cols-2: 작은 화면에서는 2열로 배치해요
                - lg:grid-cols-4: 큰 화면에서는 4열로 배치해요
                - gap-4: 요소들 사이에 여백을 4만큼 줘요
                - mb-4: 아래쪽에 여백을 4만큼 줘요
            -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                <!-- 사번 검색 필드 -->
                <div>
                    <label for="search-employee-id" class="block text-sm font-medium text-gray-700 mb-2">
                        사번 검색
                    </label>
                    <input
                        type="text"
                        id="search-employee-id"
                        class="
                            w-full
                            px-4
                            py-2
                            border
                            border-gray-300
                            rounded-lg
                            focus:outline-none
                            focus:ring-2
                            focus:ring-blue-500
                            focus:border-transparent
                            text-sm
                        "
                        placeholder="사번을 입력하세요"
                        aria-label="사번 검색"
                    >
                </div>
                
                <!-- 역할 필터 -->
                <div>
                    <label for="filter-role" class="block text-sm font-medium text-gray-700 mb-2">
                        역할 필터
                    </label>
                    <select
                        id="filter-role"
                        class="
                            w-full
                            px-4
                            py-2
                            border
                            border-gray-300
                            rounded-lg
                            focus:outline-none
                            focus:ring-2
                            focus:ring-blue-500
                            focus:border-transparent
                            text-sm
                        "
                        aria-label="역할 필터"
                    >
                        <option value="">전체</option>
                        <option value="AX 전문가">AX 전문가</option>
                        <option value="AX 실무자">AX 실무자</option>
                        <option value="생성형 AI 활용자">생성형 AI 활용자</option>
                        <option value="AX 현업 관리자">AX 현업 관리자</option>
                        <option value="AX 리더">AX 리더</option>
                        <option value="AI 입문자">AI 입문자</option>
                    </select>
                </div>
                
                <!-- 시작 날짜 필터 -->
                <div>
                    <label for="filter-start-date" class="block text-sm font-medium text-gray-700 mb-2">
                        시작 날짜
                    </label>
                    <input
                        type="date"
                        id="filter-start-date"
                        class="
                            w-full
                            px-4
                            py-2
                            border
                            border-gray-300
                            rounded-lg
                            focus:outline-none
                            focus:ring-2
                            focus:ring-blue-500
                            focus:border-transparent
                            text-sm
                        "
                        aria-label="시작 날짜 필터"
                    >
                </div>
                
                <!-- 종료 날짜 필터 -->
                <div>
                    <label for="filter-end-date" class="block text-sm font-medium text-gray-700 mb-2">
                        종료 날짜
                    </label>
                    <input
                        type="date"
                        id="filter-end-date"
                        class="
                            w-full
                            px-4
                            py-2
                            border
                            border-gray-300
                            rounded-lg
                            focus:outline-none
                            focus:ring-2
                            focus:ring-blue-500
                            focus:border-transparent
                            text-sm
                        "
                        aria-label="종료 날짜 필터"
                    >
                </div>
            </div>
            
            <!-- 
                테이블 영역: 실제 데이터를 표시하는 테이블이 있는 영역이에요
                - overflow-x-auto: 가로 스크롤이 필요하면 스크롤바를 표시해요
            -->
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-gray-500">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                        <tr>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="employeeId">
                                사번
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="role">
                                역할
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="genAIScore">
                                생성형 AI 점수
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="fieldScore">
                                실무 데이터 점수
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="strategyScore">
                                전략 점수
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="expertScore">
                                전문가 점수
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="finalRole">
                                최종 역할
                                <span class="sort-indicator">↕</span>
                            </th>
                            <th scope="col" class="px-4 py-3 cursor-pointer hover:bg-gray-100" data-sort="diagnosisDate">
                                진단 일시
                                <span class="sort-indicator">↕</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="user-table-body">
                        <!-- 
                            테이블 데이터는 JavaScript에서 동적으로 생성해요
                            로딩 중일 때는 아래와 같은 메시지를 표시해요
                        -->
                        <tr>
                            <td colspan="8" class="px-4 py-8 text-center text-gray-500">
                                데이터를 불러오는 중...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 
                페이지네이션 영역: 페이지 번호를 표시하고 이동할 수 있는 영역이에요
                - flex: 요소들을 가로로 배치해요
                - justify-between: 양쪽 끝에 배치해요
                - items-center: 세로 가운데 정렬해요
                - mt-4: 위쪽에 여백을 4만큼 줘요
            -->
            <div class="flex flex-col sm:flex-row justify-between items-center mt-4 gap-4">
                <div class="text-sm text-gray-600">
                    <span id="pagination-info">전체 0개 중 0-0개 표시</span>
                </div>
                <div class="flex gap-2" id="pagination-buttons">
                    <!-- 페이지네이션 버튼은 JavaScript에서 동적으로 생성해요 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 
        JavaScript 파일들을 연결하는 부분이에요
        - config.js: API 키 같은 설정 정보가 들어있는 파일이에요
        - admin.js: 관리자 대시보드의 동작을 제어하는 메인 JavaScript 파일이에요
        defer 속성: HTML을 모두 읽은 후에 JavaScript를 실행해요
    -->
    <script src="config.js"></script>
    <script src="js/airtable-api.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>

